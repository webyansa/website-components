<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>الوظائف الشاغرة وفرص التطوع | جدارة</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="css/careers.css">
</head>
<body>
    <!-- Hero Section -->
    <section class="careers-hero">
        <div class="hero-bg-shapes">
            <div class="shape shape-1"></div>
            <div class="shape shape-2"></div>
            <div class="shape shape-3"></div>
        </div>
        <div class="container">
            <div class="hero-content text-center">
                <div class="hero-badge">
                    <i class="bi bi-briefcase-fill"></i>
                    <span>انضم إلى فريقنا</span>
                </div>
                <h1 class="hero-title">الوظائف الشاغرة وفرص التطوع</h1>
                <p class="hero-subtitle">اكتشف الفرص المتاحة وكن جزءاً من رحلة التميز والإبداع</p>
                
                <!-- Stats -->
                <div class="hero-stats">
                    <div class="stat-item">
                        <div class="stat-icon">
                            <i class="bi bi-briefcase"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-number" id="jobsCount">5</span>
                            <span class="stat-label">وظيفة متاحة</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon volunteer">
                            <i class="bi bi-heart"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-number" id="volunteerCount">3</span>
                            <span class="stat-label">فرصة تطوعية</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Filters Section -->
    <section class="filters-section">
        <div class="container">
            <div class="filters-wrapper">
                <div class="filter-group">
                    <label>نوع الفرصة</label>
                    <select id="typeFilter" onchange="filterOpportunities()">
                        <option value="all">جميع الفرص</option>
                        <option value="job">وظيفة</option>
                        <option value="volunteer">تطوع</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>المدة</label>
                    <select id="durationFilter" onchange="filterOpportunities()">
                        <option value="all">جميع المدد</option>
                        <option value="full-time">دوام كامل</option>
                        <option value="part-time">دوام جزئي</option>
                        <option value="contract">عقد مؤقت</option>
                    </select>
                </div>
                <div class="search-group">
                    <i class="bi bi-search"></i>
                    <input type="text" id="searchInput" placeholder="ابحث عن فرصة..." oninput="filterOpportunities()">
                </div>
            </div>
        </div>
    </section>

    <!-- Opportunities Grid -->
    <section class="opportunities-section">
        <div class="container">
            <div class="opportunities-grid" id="opportunitiesGrid">
                <!-- Cards will be generated by JavaScript -->
            </div>
            
            <!-- Empty State -->
            <div class="empty-state" id="emptyState" style="display: none;">
                <div class="empty-icon">
                    <i class="bi bi-search"></i>
                </div>
                <h3>لا توجد نتائج</h3>
                <p>جرب تغيير معايير البحث أو الفلاتر</p>
            </div>
        </div>
    </section>

    <!-- Modal -->
    <div class="modal-overlay" id="modalOverlay" onclick="closeModal(event)">
        <div class="modal-container" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeModal()">
                <i class="bi bi-x-lg"></i>
            </button>
            
            <!-- Job Details View -->
            <div class="modal-content" id="detailsView">
                <div class="modal-header">
                    <div class="job-type-badge" id="modalBadge"></div>
                    <h2 class="modal-title" id="modalTitle"></h2>
                    <div class="modal-meta">
                        <span><i class="bi bi-calendar3"></i> <span id="modalDate"></span></span>
                        <span><i class="bi bi-clock"></i> <span id="modalDuration"></span></span>
                    </div>
                </div>
                
                <div class="modal-body">
                    <div class="detail-section">
                        <h4><i class="bi bi-file-text"></i> الوصف الوظيفي</h4>
                        <p id="modalDescription"></p>
                    </div>
                    
                    <div class="detail-section">
                        <h4><i class="bi bi-list-check"></i> المتطلبات</h4>
                        <ul id="modalRequirements"></ul>
                    </div>
                    
                    <div class="detail-section">
                        <h4><i class="bi bi-send"></i> طريقة التقديم</h4>
                        <p id="modalApplicationMethod"></p>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button class="btn-apply" id="applyBtn" onclick="showApplicationForm()">
                        <i class="bi bi-send-fill"></i>
                        تقدم الآن
                    </button>
                    <button class="btn-share" onclick="shareOpportunity()">
                        <i class="bi bi-share"></i>
                        مشاركة
                    </button>
                </div>
            </div>
            
            <!-- Application Form View -->
            <div class="modal-content" id="applicationView" style="display: none;">
                <div class="professional-form-header">
                    <div class="form-header-icon">
                        <i class="bi bi-person-plus-fill"></i>
                    </div>
                    <h2>التقديم لوظيفة</h2>
                    <p id="formJobTitle" class="job-title-display"></p>
                </div>
                
                <form id="applicationForm" class="professional-form" onsubmit="submitApplication(event)">
                    <!-- Personal Info Section -->
                    <div class="form-section-pro">
                        <div class="form-field-pro">
                            <input type="text" name="fullName" required placeholder="الاسم الكامل" class="field-input-pro">
                        </div>
                        
                        <div class="form-field-pro">
                            <input type="email" name="email" required placeholder="البريد الإلكتروني" class="field-input-pro">
                        </div>
                        
                        <div class="form-field-pro">
                            <div class="phone-wrapper-pro">
                                <div class="country-selector">
                                    <img src="https://flagcdn.com/w40/sa.png" alt="SA" class="flag-icon">
                                    <span class="country-code-text">966+</span>
                                </div>
                                <input type="tel" name="phone" required placeholder="5xxxxxxxx" class="phone-input-pro" maxlength="9" oninput="validatePhone(this)">
                                <span class="phone-validation-icon"><i class="bi bi-check-circle-fill"></i></span>
                            </div>
                        </div>
                    </div>

                    <!-- Additional Info Section -->
                    <div class="form-section-pro">
                        <div class="section-title-pro">الجنسية</div>
                        <div class="form-field-pro">
                            <div class="select-wrapper-pro">
                                <select name="nationality" required class="field-select-pro">
                                    <option value="">اختر الجنسية</option>
                                    <option value="المملكة العربية السعودية">المملكة العربية السعودية</option>
                                    <option value="الإمارات">الإمارات العربية المتحدة</option>
                                    <option value="الكويت">الكويت</option>
                                    <option value="البحرين">البحرين</option>
                                    <option value="قطر">قطر</option>
                                    <option value="عمان">سلطنة عمان</option>
                                    <option value="أخرى">أخرى</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-grid-pro">
                            <div class="form-field-pro half">
                                <div class="section-title-pro">جنس</div>
                                <div class="select-wrapper-pro">
                                    <select name="gender" required class="field-select-pro">
                                        <option value="">اختر</option>
                                        <option value="ذكر">ذكر</option>
                                        <option value="أنثى">أنثى</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-field-pro half">
                                <div class="section-title-pro">المستوى التعليمي</div>
                                <div class="select-wrapper-pro">
                                    <select name="education" required class="field-select-pro">
                                        <option value="">اختر</option>
                                        <option value="ثانوي">ثانوي</option>
                                        <option value="دبلوم">دبلوم</option>
                                        <option value="بكالوريوس">بكالوريوس</option>
                                        <option value="ماجستير">ماجستير</option>
                                        <option value="دكتوراه">دكتوراه</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-grid-pro">
                            <div class="form-field-pro half">
                                <div class="section-title-pro">تاريخ الميلاد</div>
                                <div class="date-input-wrapper">
                                    <input type="date" name="birthDate" required class="field-input-pro date-field-pro" onchange="validateDate(this)">
                                    <span class="date-validation-icon"><i class="bi bi-check-circle-fill"></i></span>
                                </div>
                            </div>
                            <div class="form-field-pro half">
                                <div class="section-title-pro">الخبرات</div>
                                <div class="exp-input-wrapper">
                                    <input type="number" name="experience" required placeholder="0" min="0" max="50" class="field-input-pro" oninput="validateExp(this)">
                                    <span class="exp-validation-icon"><i class="bi bi-check-circle-fill"></i></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Location Section -->
                    <div class="form-section-pro">
                        <div class="section-title-pro">المنطقة</div>
                        <div class="form-field-pro">
                            <div class="select-wrapper-pro">
                                <select name="region" required class="field-select-pro">
                                    <option value="">اختر المنطقة</option>
                                    <option value="الرياض">الرياض</option>
                                    <option value="مكة المكرمة">مكة المكرمة</option>
                                    <option value="المدينة المنورة">المدينة المنورة</option>
                                    <option value="القصيم">القصيم</option>
                                    <option value="المنطقة الشرقية">المنطقة الشرقية</option>
                                    <option value="عسير">عسير</option>
                                    <option value="تبوك">تبوك</option>
                                    <option value="حائل">حائل</option>
                                    <option value="الحدود الشمالية">الحدود الشمالية</option>
                                    <option value="جازان">جازان</option>
                                    <option value="نجران">نجران</option>
                                    <option value="الباحة">الباحة</option>
                                    <option value="الجوف">الجوف</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Professional Section -->
                    <div class="form-section-pro">
                        <div class="form-field-pro">
                            <div class="specialty-input-wrapper">
                                <input type="text" name="specialty" required placeholder="التخصص المهني (مثال: تقنية معلومات مبرمج)" class="field-input-pro specialty-field">
                            </div>
                        </div>
                        
                        <div class="form-field-pro">
                            <textarea name="skills" rows="3" placeholder="المهارات والخبرات" class="field-textarea-pro"></textarea>
                        </div>
                        
                        <div class="form-field-pro">
                            <textarea name="motivation" rows="4" required placeholder="لماذا ترغب في هذه الفرصة؟" class="field-textarea-pro"></textarea>
                        </div>
                    </div>

                    <!-- Documents Section -->
                    <div class="form-section-pro">
                        <div class="form-field-pro">
                            <div class="file-upload-pro">
                                <input type="file" name="cv" id="cvFile" accept=".pdf,.doc,.docx" onchange="updateFileName(this)">
                                <div class="file-content-pro">
                                    <div class="file-icon-pro">
                                        <i class="bi bi-cloud-arrow-up"></i>
                                    </div>
                                    <div class="file-text-pro">
                                        <span class="file-primary-text">اسحب الملف هنا أو اضغط للاختيار</span>
                                        <span class="file-secondary-text">PDF, DOC, DOCX - حجم أقصى 5MB</span>
                                    </div>
                                </div>
                                <span class="file-name-pro" id="fileName"></span>
                            </div>
                        </div>
                    </div>

                    <!-- Captcha Section -->
                    <div class="form-section-pro captcha-section">
                        <div class="recaptcha-box">
                            <img src="https://www.gstatic.com/recaptcha/api2/logo_48.png" alt="reCAPTCHA" class="recaptcha-img">
                            <div class="recaptcha-inner">
                                <label class="checkbox-label-pro">
                                    <input type="checkbox" name="notRobot" required>
                                    <span class="custom-checkbox"></span>
                                    <span class="checkbox-text">أنا لست برنامج روبوت</span>
                                </label>
                                <div class="recaptcha-brand">
                                    <span>reCAPTCHA</span>
                                    <small>الخصوصية - الشروط</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Form Actions -->
                    <div class="form-actions-pro">
                        <button type="submit" class="btn-submit-pro">
                            <span>ارسل الآن</span>
                            <i class="bi bi-arrow-left"></i>
                        </button>
                    </div>
                    
                    <div class="back-link-pro">
                        <button type="button" class="btn-back-pro" onclick="showDetailsView()">
                            <i class="bi bi-arrow-right"></i>
                            <span>العودة للتفاصيل</span>
                        </button>
                    </div>
                </form>
            </div>
            
            <!-- Success View -->
            <div class="modal-content" id="successView" style="display: none;">
                <div class="success-content">
                    <div class="success-icon">
                        <i class="bi bi-check-lg"></i>
                    </div>
                    <h2>تم إرسال طلبك بنجاح!</h2>
                    <p>شكراً لاهتمامك، سيتم التواصل معك قريباً</p>
                    <div class="success-details">
                        <span><i class="bi bi-envelope-check"></i> سيصلك تأكيد على بريدك الإلكتروني</span>
                    </div>
                    <button class="btn-close-success" onclick="closeModal()">
                        إغلاق
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Sample Data
        const opportunities = [
            {
                id: 1,
                title: "مطور واجهات أمامية",
                type: "job",
                duration: "full-time",
                durationText: "دوام كامل",
                publishDate: "2025-12-10",
                description: "نبحث عن مطور واجهات أمامية متميز للانضمام إلى فريقنا التقني. ستكون مسؤولاً عن تطوير وتحسين واجهات المستخدم لمنصاتنا الرقمية باستخدام أحدث التقنيات.",
                requirements: [
                    "خبرة لا تقل عن 3 سنوات في تطوير الواجهات الأمامية",
                    "إتقان HTML, CSS, JavaScript",
                    "خبرة في React أو Vue.js",
                    "معرفة بأساسيات تجربة المستخدم UX",
                    "القدرة على العمل ضمن فريق"
                ],
                applicationMethod: "website",
                applicationText: "التقديم عبر الموقع الإلكتروني"
            },
            {
                id: 2,
                title: "متطوع في التسويق الرقمي",
                type: "volunteer",
                duration: "part-time",
                durationText: "دوام جزئي",
                publishDate: "2025-12-12",
                description: "فرصة تطوعية رائعة للمهتمين بالتسويق الرقمي. ستساهم في إدارة حسابات التواصل الاجتماعي وإنشاء محتوى إبداعي للمنظمة.",
                requirements: [
                    "شغف بالتسويق الرقمي والتواصل الاجتماعي",
                    "مهارات كتابة جيدة",
                    "إلمام ببرامج التصميم الأساسية",
                    "الالتزام بـ 10 ساعات أسبوعياً"
                ],
                applicationMethod: "website",
                applicationText: "التقديم عبر الموقع الإلكتروني"
            },
            {
                id: 3,
                title: "محاسب",
                type: "job",
                duration: "full-time",
                durationText: "دوام كامل",
                publishDate: "2025-12-08",
                description: "نبحث عن محاسب محترف لإدارة العمليات المالية والمحاسبية للمنظمة وإعداد التقارير المالية الدورية.",
                requirements: [
                    "بكالوريوس في المحاسبة أو المالية",
                    "خبرة لا تقل عن سنتين",
                    "إتقان برامج المحاسبة",
                    "معرفة بأنظمة الزكاة والضريبة"
                ],
                applicationMethod: "website",
                applicationText: "التقديم عبر الموقع الإلكتروني"
            },
            {
                id: 4,
                title: "متطوع في الفعاليات",
                type: "volunteer",
                duration: "contract",
                durationText: "عقد مؤقت",
                publishDate: "2025-12-14",
                description: "انضم إلى فريق تنظيم الفعاليات وساهم في إنجاح فعالياتنا المجتمعية والتدريبية.",
                requirements: [
                    "مهارات تواصل ممتازة",
                    "القدرة على العمل تحت الضغط",
                    "المرونة في المواعيد",
                    "روح المبادرة والعمل الجماعي"
                ],
                applicationMethod: "website",
                applicationText: "التقديم عبر الموقع الإلكتروني"
            },
            {
                id: 5,
                title: "مصمم جرافيك",
                type: "job",
                duration: "part-time",
                durationText: "دوام جزئي",
                publishDate: "2025-12-11",
                description: "نبحث عن مصمم جرافيك مبدع لتصميم المواد البصرية والتسويقية للمنظمة.",
                requirements: [
                    "إتقان Adobe Creative Suite",
                    "خبرة في تصميم الهوية البصرية",
                    "ملف أعمال قوي",
                    "القدرة على الابتكار والإبداع"
                ],
                applicationMethod: "email",
                applicationText: "إرسال السيرة الذاتية على: jobs@jadarah.org"
            },
            {
                id: 6,
                title: "متطوع في الدعم الفني",
                type: "volunteer",
                duration: "part-time",
                durationText: "دوام جزئي",
                publishDate: "2025-12-15",
                description: "ساعدنا في تقديم الدعم الفني للمستفيدين من منصاتنا الرقمية.",
                requirements: [
                    "معرفة تقنية جيدة",
                    "صبر ومهارات تواصل",
                    "القدرة على حل المشكلات",
                    "التزام بـ 8 ساعات أسبوعياً"
                ],
                applicationMethod: "website",
                applicationText: "التقديم عبر الموقع الإلكتروني"
            },
            {
                id: 7,
                title: "مدير مشاريع",
                type: "job",
                duration: "full-time",
                durationText: "دوام كامل",
                publishDate: "2025-12-09",
                description: "نبحث عن مدير مشاريع محترف لقيادة وإدارة مشاريع المنظمة الاستراتيجية.",
                requirements: [
                    "شهادة PMP أو ما يعادلها",
                    "خبرة 5 سنوات في إدارة المشاريع",
                    "مهارات قيادية قوية",
                    "إتقان أدوات إدارة المشاريع"
                ],
                applicationMethod: "website",
                applicationText: "التقديم عبر الموقع الإلكتروني"
            },
            {
                id: 8,
                title: "كاتب محتوى",
                type: "job",
                duration: "contract",
                durationText: "عقد مؤقت",
                publishDate: "2025-12-13",
                description: "نبحث عن كاتب محتوى محترف لكتابة المحتوى التسويقي والتعليمي للمنظمة.",
                requirements: [
                    "مهارات كتابة إبداعية متميزة",
                    "خبرة في كتابة المحتوى الرقمي",
                    "معرفة بأساسيات SEO",
                    "القدرة على البحث والتحليل"
                ],
                applicationMethod: "website",
                applicationText: "التقديم عبر الموقع الإلكتروني"
            }
        ];

        let currentOpportunity = null;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            renderOpportunities(opportunities);
            updateStats();
        });

        function updateStats() {
            const jobs = opportunities.filter(o => o.type === 'job').length;
            const volunteers = opportunities.filter(o => o.type === 'volunteer').length;
            document.getElementById('jobsCount').textContent = jobs;
            document.getElementById('volunteerCount').textContent = volunteers;
        }

        function renderOpportunities(data) {
            const grid = document.getElementById('opportunitiesGrid');
            const emptyState = document.getElementById('emptyState');
            
            if (data.length === 0) {
                grid.style.display = 'none';
                emptyState.style.display = 'flex';
                return;
            }
            
            grid.style.display = 'grid';
            emptyState.style.display = 'none';
            
            grid.innerHTML = data.map((opportunity, index) => `
                <div class="opportunity-card ${opportunity.type}" style="animation-delay: ${index * 0.1}s">
                    <div class="card-header">
                        <div class="type-badge ${opportunity.type}">
                            <i class="bi bi-${opportunity.type === 'job' ? 'briefcase' : 'heart'}"></i>
                            ${opportunity.type === 'job' ? 'وظيفة' : 'تطوع'}
                        </div>
                        <div class="duration-badge">
                            <i class="bi bi-clock"></i>
                            ${opportunity.durationText}
                        </div>
                    </div>
                    
                    <div class="card-body">
                        <h3 class="card-title">${opportunity.title}</h3>
                        <p class="card-description">${opportunity.description.substring(0, 100)}...</p>
                    </div>
                    
                    <div class="card-footer">
                        <div class="publish-date">
                            <i class="bi bi-calendar3"></i>
                            ${formatDate(opportunity.publishDate)}
                        </div>
                        <button class="btn-details" onclick="openModal(${opportunity.id})">
                            التفاصيل
                            <i class="bi bi-arrow-left"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function filterOpportunities() {
            const type = document.getElementById('typeFilter').value;
            const duration = document.getElementById('durationFilter').value;
            const search = document.getElementById('searchInput').value.toLowerCase();
            
            let filtered = opportunities;
            
            if (type !== 'all') {
                filtered = filtered.filter(o => o.type === type);
            }
            
            if (duration !== 'all') {
                filtered = filtered.filter(o => o.duration === duration);
            }
            
            if (search) {
                filtered = filtered.filter(o => 
                    o.title.toLowerCase().includes(search) || 
                    o.description.toLowerCase().includes(search)
                );
            }
            
            renderOpportunities(filtered);
        }

        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleDateString('ar-SA', { year: 'numeric', month: 'long', day: 'numeric' });
        }

        function openModal(id) {
            currentOpportunity = opportunities.find(o => o.id === id);
            if (!currentOpportunity) return;
            
            // Populate modal
            document.getElementById('modalTitle').textContent = currentOpportunity.title;
            document.getElementById('modalBadge').className = `job-type-badge ${currentOpportunity.type}`;
            document.getElementById('modalBadge').innerHTML = `
                <i class="bi bi-${currentOpportunity.type === 'job' ? 'briefcase' : 'heart'}"></i>
                ${currentOpportunity.type === 'job' ? 'وظيفة' : 'تطوع'}
            `;
            document.getElementById('modalDate').textContent = formatDate(currentOpportunity.publishDate);
            document.getElementById('modalDuration').textContent = currentOpportunity.durationText;
            document.getElementById('modalDescription').textContent = currentOpportunity.description;
            document.getElementById('modalApplicationMethod').textContent = currentOpportunity.applicationText;
            
            // Requirements list
            const reqList = document.getElementById('modalRequirements');
            reqList.innerHTML = currentOpportunity.requirements.map(req => `<li>${req}</li>`).join('');
            
            // Show/hide apply button based on application method
            const applyBtn = document.getElementById('applyBtn');
            if (currentOpportunity.applicationMethod === 'website') {
                applyBtn.style.display = 'flex';
            } else {
                applyBtn.style.display = 'none';
            }
            
            // Show modal
            document.getElementById('modalOverlay').classList.add('active');
            document.getElementById('detailsView').style.display = 'block';
            document.getElementById('applicationView').style.display = 'none';
            document.getElementById('successView').style.display = 'none';
            document.body.style.overflow = 'hidden';
        }

        function closeModal(event) {
            if (event && event.target !== document.getElementById('modalOverlay')) return;
            document.getElementById('modalOverlay').classList.remove('active');
            document.body.style.overflow = '';
            
            // Reset form
            document.getElementById('applicationForm').reset();
            document.getElementById('fileName').textContent = 'اسحب الملف هنا أو انقر للاختيار';
        }

        function showApplicationForm() {
            document.getElementById('detailsView').style.display = 'none';
            document.getElementById('applicationView').style.display = 'block';
            document.getElementById('formJobTitle').textContent = currentOpportunity.title;
        }

        function showDetailsView() {
            document.getElementById('applicationView').style.display = 'none';
            document.getElementById('detailsView').style.display = 'block';
        }

        function updateFileName(input) {
            const fileNameEl = document.getElementById('fileName');
            if (input.files[0]) {
                fileNameEl.textContent = input.files[0].name;
                fileNameEl.style.display = 'block';
            } else {
                fileNameEl.textContent = '';
                fileNameEl.style.display = 'none';
            }
        }

        function validatePhone(input) {
            const value = input.value.replace(/\D/g, '');
            input.value = value;
            const icon = document.querySelector('.phone-validation-icon');
            if (value.length >= 9 && value.startsWith('5')) {
                icon.classList.add('show');
            } else {
                icon.classList.remove('show');
            }
        }

        function validateDate(input) {
            const icon = document.querySelector('.date-validation-icon');
            if (input.value) {
                icon.classList.add('show');
            } else {
                icon.classList.remove('show');
            }
        }

        function validateExp(input) {
            const icon = document.querySelector('.exp-validation-icon');
            if (input.value && parseInt(input.value) >= 0) {
                icon.classList.add('show');
            } else {
                icon.classList.remove('show');
            }
        }

        function submitApplication(event) {
            event.preventDefault();
            
            const formData = new FormData(event.target);
            const data = Object.fromEntries(formData.entries());
            data.opportunityId = currentOpportunity.id;
            data.opportunityTitle = currentOpportunity.title;
            
            console.log('Application submitted:', data);
            
            // Show success view
            document.getElementById('applicationView').style.display = 'none';
            document.getElementById('successView').style.display = 'flex';
        }

        function shareOpportunity() {
            const text = `فرصة: ${currentOpportunity.title} - ${currentOpportunity.type === 'job' ? 'وظيفة' : 'تطوع'}`;
            const url = window.location.href;
            
            if (navigator.share) {
                navigator.share({ title: currentOpportunity.title, text, url });
            } else {
                navigator.clipboard.writeText(`${text}\n${url}`);
                alert('تم نسخ الرابط!');
            }
        }

        // Close modal on Escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') closeModal();
        });
    </script>
</body>
</html>
