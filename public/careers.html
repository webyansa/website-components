<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>الوظائف الشاغرة وفرص التطوع | جدارة</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="css/careers.css">
</head>
<body>
    <!-- Hero Section -->
    <section class="careers-hero">
        <div class="hero-bg-shapes">
            <div class="shape shape-1"></div>
            <div class="shape shape-2"></div>
            <div class="shape shape-3"></div>
        </div>
        <div class="container">
            <div class="hero-content text-center">
                <div class="hero-badge">
                    <i class="bi bi-briefcase-fill"></i>
                    <span>انضم إلى فريقنا</span>
                </div>
                <h1 class="hero-title">الوظائف الشاغرة وفرص التطوع</h1>
                <p class="hero-subtitle">اكتشف الفرص المتاحة وكن جزءاً من رحلة التميز والإبداع</p>
                
                <!-- Stats -->
                <div class="hero-stats">
                    <div class="stat-item">
                        <div class="stat-icon">
                            <i class="bi bi-briefcase"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-number" id="jobsCount">5</span>
                            <span class="stat-label">وظيفة متاحة</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon volunteer">
                            <i class="bi bi-heart"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-number" id="volunteerCount">3</span>
                            <span class="stat-label">فرصة تطوعية</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Filters Section -->
    <section class="filters-section">
        <div class="container">
            <div class="filters-wrapper">
                <div class="filter-group">
                    <label>نوع الفرصة</label>
                    <select id="typeFilter" onchange="filterOpportunities()">
                        <option value="all">جميع الفرص</option>
                        <option value="job">وظيفة</option>
                        <option value="volunteer">تطوع</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>المدة</label>
                    <select id="durationFilter" onchange="filterOpportunities()">
                        <option value="all">جميع المدد</option>
                        <option value="full-time">دوام كامل</option>
                        <option value="part-time">دوام جزئي</option>
                        <option value="contract">عقد مؤقت</option>
                    </select>
                </div>
                <div class="search-group">
                    <i class="bi bi-search"></i>
                    <input type="text" id="searchInput" placeholder="ابحث عن فرصة..." oninput="filterOpportunities()">
                </div>
            </div>
        </div>
    </section>

    <!-- Opportunities Grid -->
    <section class="opportunities-section">
        <div class="container">
            <div class="opportunities-grid" id="opportunitiesGrid">
                <!-- Cards will be generated by JavaScript -->
            </div>
            
            <!-- Empty State -->
            <div class="empty-state" id="emptyState" style="display: none;">
                <div class="empty-icon">
                    <i class="bi bi-search"></i>
                </div>
                <h3>لا توجد نتائج</h3>
                <p>جرب تغيير معايير البحث أو الفلاتر</p>
            </div>
        </div>
    </section>

    <!-- Modal -->
    <div class="modal-overlay" id="modalOverlay" onclick="closeModal(event)">
        <div class="modal-container" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeModal()">
                <i class="bi bi-x-lg"></i>
            </button>
            
            <!-- Job Details View -->
            <div class="modal-content" id="detailsView">
                <div class="modal-header">
                    <div class="job-type-badge" id="modalBadge"></div>
                    <h2 class="modal-title" id="modalTitle"></h2>
                    <div class="modal-meta">
                        <span><i class="bi bi-calendar3"></i> <span id="modalDate"></span></span>
                        <span><i class="bi bi-clock"></i> <span id="modalDuration"></span></span>
                    </div>
                </div>
                
                <div class="modal-body">
                    <div class="detail-section">
                        <h4><i class="bi bi-file-text"></i> الوصف الوظيفي</h4>
                        <p id="modalDescription"></p>
                    </div>
                    
                    <div class="detail-section">
                        <h4><i class="bi bi-list-check"></i> المتطلبات</h4>
                        <ul id="modalRequirements"></ul>
                    </div>
                    
                    <div class="detail-section">
                        <h4><i class="bi bi-send"></i> طريقة التقديم</h4>
                        <p id="modalApplicationMethod"></p>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button class="btn-apply" id="applyBtn" onclick="showApplicationForm()">
                        <i class="bi bi-send-fill"></i>
                        تقدم الآن
                    </button>
                    <button class="btn-share" onclick="shareOpportunity()">
                        <i class="bi bi-share"></i>
                        مشاركة
                    </button>
                </div>
            </div>
            
            <!-- Application Form View -->
            <div class="modal-content" id="applicationView" style="display: none;">
                <div class="form-header">
                    <button class="back-btn" onclick="showDetailsView()">
                        <i class="bi bi-arrow-right"></i>
                        العودة للتفاصيل
                    </button>
                    <h2>نموذج التقديم</h2>
                    <p id="formJobTitle"></p>
                </div>
                
                <form id="applicationForm" onsubmit="submitApplication(event)">
                    <div class="form-row">
                        <div class="form-group">
                            <label><i class="bi bi-person"></i> الاسم الكامل</label>
                            <input type="text" name="fullName" required placeholder="أدخل اسمك الكامل">
                        </div>
                        <div class="form-group">
                            <label><i class="bi bi-envelope"></i> البريد الإلكتروني</label>
                            <input type="email" name="email" required placeholder="example@email.com">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label><i class="bi bi-phone"></i> رقم الجوال</label>
                            <input type="tel" name="phone" required placeholder="05xxxxxxxx">
                        </div>
                        <div class="form-group">
                            <label><i class="bi bi-geo-alt"></i> المدينة</label>
                            <input type="text" name="city" required placeholder="المدينة">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label><i class="bi bi-mortarboard"></i> المؤهل العلمي</label>
                        <select name="education" required>
                            <option value="">اختر المؤهل</option>
                            <option value="highschool">ثانوية عامة</option>
                            <option value="diploma">دبلوم</option>
                            <option value="bachelor">بكالوريوس</option>
                            <option value="master">ماجستير</option>
                            <option value="phd">دكتوراه</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label><i class="bi bi-file-earmark-pdf"></i> السيرة الذاتية</label>
                        <div class="file-upload">
                            <input type="file" name="cv" id="cvFile" accept=".pdf,.doc,.docx" onchange="updateFileName(this)">
                            <label for="cvFile">
                                <i class="bi bi-cloud-upload"></i>
                                <span id="fileName">اسحب الملف هنا أو انقر للاختيار</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label><i class="bi bi-chat-text"></i> رسالة التقديم (اختياري)</label>
                        <textarea name="coverLetter" rows="4" placeholder="اكتب رسالة قصيرة عن نفسك ولماذا تريد هذه الفرصة..."></textarea>
                    </div>
                    
                    <button type="submit" class="btn-submit">
                        <i class="bi bi-check-circle"></i>
                        إرسال الطلب
                    </button>
                </form>
            </div>
            
            <!-- Success View -->
            <div class="modal-content" id="successView" style="display: none;">
                <div class="success-content">
                    <div class="success-icon">
                        <i class="bi bi-check-lg"></i>
                    </div>
                    <h2>تم إرسال طلبك بنجاح!</h2>
                    <p>شكراً لاهتمامك، سيتم التواصل معك قريباً</p>
                    <div class="success-details">
                        <span><i class="bi bi-envelope-check"></i> سيصلك تأكيد على بريدك الإلكتروني</span>
                    </div>
                    <button class="btn-close-success" onclick="closeModal()">
                        إغلاق
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Sample Data
        const opportunities = [
            {
                id: 1,
                title: "مطور واجهات أمامية",
                type: "job",
                duration: "full-time",
                durationText: "دوام كامل",
                publishDate: "2025-12-10",
                description: "نبحث عن مطور واجهات أمامية متميز للانضمام إلى فريقنا التقني. ستكون مسؤولاً عن تطوير وتحسين واجهات المستخدم لمنصاتنا الرقمية باستخدام أحدث التقنيات.",
                requirements: [
                    "خبرة لا تقل عن 3 سنوات في تطوير الواجهات الأمامية",
                    "إتقان HTML, CSS, JavaScript",
                    "خبرة في React أو Vue.js",
                    "معرفة بأساسيات تجربة المستخدم UX",
                    "القدرة على العمل ضمن فريق"
                ],
                applicationMethod: "website",
                applicationText: "التقديم عبر الموقع الإلكتروني"
            },
            {
                id: 2,
                title: "متطوع في التسويق الرقمي",
                type: "volunteer",
                duration: "part-time",
                durationText: "دوام جزئي",
                publishDate: "2025-12-12",
                description: "فرصة تطوعية رائعة للمهتمين بالتسويق الرقمي. ستساهم في إدارة حسابات التواصل الاجتماعي وإنشاء محتوى إبداعي للمنظمة.",
                requirements: [
                    "شغف بالتسويق الرقمي والتواصل الاجتماعي",
                    "مهارات كتابة جيدة",
                    "إلمام ببرامج التصميم الأساسية",
                    "الالتزام بـ 10 ساعات أسبوعياً"
                ],
                applicationMethod: "website",
                applicationText: "التقديم عبر الموقع الإلكتروني"
            },
            {
                id: 3,
                title: "محاسب",
                type: "job",
                duration: "full-time",
                durationText: "دوام كامل",
                publishDate: "2025-12-08",
                description: "نبحث عن محاسب محترف لإدارة العمليات المالية والمحاسبية للمنظمة وإعداد التقارير المالية الدورية.",
                requirements: [
                    "بكالوريوس في المحاسبة أو المالية",
                    "خبرة لا تقل عن سنتين",
                    "إتقان برامج المحاسبة",
                    "معرفة بأنظمة الزكاة والضريبة"
                ],
                applicationMethod: "website",
                applicationText: "التقديم عبر الموقع الإلكتروني"
            },
            {
                id: 4,
                title: "متطوع في الفعاليات",
                type: "volunteer",
                duration: "contract",
                durationText: "عقد مؤقت",
                publishDate: "2025-12-14",
                description: "انضم إلى فريق تنظيم الفعاليات وساهم في إنجاح فعالياتنا المجتمعية والتدريبية.",
                requirements: [
                    "مهارات تواصل ممتازة",
                    "القدرة على العمل تحت الضغط",
                    "المرونة في المواعيد",
                    "روح المبادرة والعمل الجماعي"
                ],
                applicationMethod: "website",
                applicationText: "التقديم عبر الموقع الإلكتروني"
            },
            {
                id: 5,
                title: "مصمم جرافيك",
                type: "job",
                duration: "part-time",
                durationText: "دوام جزئي",
                publishDate: "2025-12-11",
                description: "نبحث عن مصمم جرافيك مبدع لتصميم المواد البصرية والتسويقية للمنظمة.",
                requirements: [
                    "إتقان Adobe Creative Suite",
                    "خبرة في تصميم الهوية البصرية",
                    "ملف أعمال قوي",
                    "القدرة على الابتكار والإبداع"
                ],
                applicationMethod: "email",
                applicationText: "إرسال السيرة الذاتية على: jobs@jadarah.org"
            },
            {
                id: 6,
                title: "متطوع في الدعم الفني",
                type: "volunteer",
                duration: "part-time",
                durationText: "دوام جزئي",
                publishDate: "2025-12-15",
                description: "ساعدنا في تقديم الدعم الفني للمستفيدين من منصاتنا الرقمية.",
                requirements: [
                    "معرفة تقنية جيدة",
                    "صبر ومهارات تواصل",
                    "القدرة على حل المشكلات",
                    "التزام بـ 8 ساعات أسبوعياً"
                ],
                applicationMethod: "website",
                applicationText: "التقديم عبر الموقع الإلكتروني"
            },
            {
                id: 7,
                title: "مدير مشاريع",
                type: "job",
                duration: "full-time",
                durationText: "دوام كامل",
                publishDate: "2025-12-09",
                description: "نبحث عن مدير مشاريع محترف لقيادة وإدارة مشاريع المنظمة الاستراتيجية.",
                requirements: [
                    "شهادة PMP أو ما يعادلها",
                    "خبرة 5 سنوات في إدارة المشاريع",
                    "مهارات قيادية قوية",
                    "إتقان أدوات إدارة المشاريع"
                ],
                applicationMethod: "website",
                applicationText: "التقديم عبر الموقع الإلكتروني"
            },
            {
                id: 8,
                title: "كاتب محتوى",
                type: "job",
                duration: "contract",
                durationText: "عقد مؤقت",
                publishDate: "2025-12-13",
                description: "نبحث عن كاتب محتوى محترف لكتابة المحتوى التسويقي والتعليمي للمنظمة.",
                requirements: [
                    "مهارات كتابة إبداعية متميزة",
                    "خبرة في كتابة المحتوى الرقمي",
                    "معرفة بأساسيات SEO",
                    "القدرة على البحث والتحليل"
                ],
                applicationMethod: "website",
                applicationText: "التقديم عبر الموقع الإلكتروني"
            }
        ];

        let currentOpportunity = null;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            renderOpportunities(opportunities);
            updateStats();
        });

        function updateStats() {
            const jobs = opportunities.filter(o => o.type === 'job').length;
            const volunteers = opportunities.filter(o => o.type === 'volunteer').length;
            document.getElementById('jobsCount').textContent = jobs;
            document.getElementById('volunteerCount').textContent = volunteers;
        }

        function renderOpportunities(data) {
            const grid = document.getElementById('opportunitiesGrid');
            const emptyState = document.getElementById('emptyState');
            
            if (data.length === 0) {
                grid.style.display = 'none';
                emptyState.style.display = 'flex';
                return;
            }
            
            grid.style.display = 'grid';
            emptyState.style.display = 'none';
            
            grid.innerHTML = data.map((opportunity, index) => `
                <div class="opportunity-card ${opportunity.type}" style="animation-delay: ${index * 0.1}s">
                    <div class="card-header">
                        <div class="type-badge ${opportunity.type}">
                            <i class="bi bi-${opportunity.type === 'job' ? 'briefcase' : 'heart'}"></i>
                            ${opportunity.type === 'job' ? 'وظيفة' : 'تطوع'}
                        </div>
                        <div class="duration-badge">
                            <i class="bi bi-clock"></i>
                            ${opportunity.durationText}
                        </div>
                    </div>
                    
                    <div class="card-body">
                        <h3 class="card-title">${opportunity.title}</h3>
                        <p class="card-description">${opportunity.description.substring(0, 100)}...</p>
                    </div>
                    
                    <div class="card-footer">
                        <div class="publish-date">
                            <i class="bi bi-calendar3"></i>
                            ${formatDate(opportunity.publishDate)}
                        </div>
                        <button class="btn-details" onclick="openModal(${opportunity.id})">
                            التفاصيل
                            <i class="bi bi-arrow-left"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function filterOpportunities() {
            const type = document.getElementById('typeFilter').value;
            const duration = document.getElementById('durationFilter').value;
            const search = document.getElementById('searchInput').value.toLowerCase();
            
            let filtered = opportunities;
            
            if (type !== 'all') {
                filtered = filtered.filter(o => o.type === type);
            }
            
            if (duration !== 'all') {
                filtered = filtered.filter(o => o.duration === duration);
            }
            
            if (search) {
                filtered = filtered.filter(o => 
                    o.title.toLowerCase().includes(search) || 
                    o.description.toLowerCase().includes(search)
                );
            }
            
            renderOpportunities(filtered);
        }

        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleDateString('ar-SA', { year: 'numeric', month: 'long', day: 'numeric' });
        }

        function openModal(id) {
            currentOpportunity = opportunities.find(o => o.id === id);
            if (!currentOpportunity) return;
            
            // Populate modal
            document.getElementById('modalTitle').textContent = currentOpportunity.title;
            document.getElementById('modalBadge').className = `job-type-badge ${currentOpportunity.type}`;
            document.getElementById('modalBadge').innerHTML = `
                <i class="bi bi-${currentOpportunity.type === 'job' ? 'briefcase' : 'heart'}"></i>
                ${currentOpportunity.type === 'job' ? 'وظيفة' : 'تطوع'}
            `;
            document.getElementById('modalDate').textContent = formatDate(currentOpportunity.publishDate);
            document.getElementById('modalDuration').textContent = currentOpportunity.durationText;
            document.getElementById('modalDescription').textContent = currentOpportunity.description;
            document.getElementById('modalApplicationMethod').textContent = currentOpportunity.applicationText;
            
            // Requirements list
            const reqList = document.getElementById('modalRequirements');
            reqList.innerHTML = currentOpportunity.requirements.map(req => `<li>${req}</li>`).join('');
            
            // Show/hide apply button based on application method
            const applyBtn = document.getElementById('applyBtn');
            if (currentOpportunity.applicationMethod === 'website') {
                applyBtn.style.display = 'flex';
            } else {
                applyBtn.style.display = 'none';
            }
            
            // Show modal
            document.getElementById('modalOverlay').classList.add('active');
            document.getElementById('detailsView').style.display = 'block';
            document.getElementById('applicationView').style.display = 'none';
            document.getElementById('successView').style.display = 'none';
            document.body.style.overflow = 'hidden';
        }

        function closeModal(event) {
            if (event && event.target !== document.getElementById('modalOverlay')) return;
            document.getElementById('modalOverlay').classList.remove('active');
            document.body.style.overflow = '';
            
            // Reset form
            document.getElementById('applicationForm').reset();
            document.getElementById('fileName').textContent = 'اسحب الملف هنا أو انقر للاختيار';
        }

        function showApplicationForm() {
            document.getElementById('detailsView').style.display = 'none';
            document.getElementById('applicationView').style.display = 'block';
            document.getElementById('formJobTitle').textContent = currentOpportunity.title;
        }

        function showDetailsView() {
            document.getElementById('applicationView').style.display = 'none';
            document.getElementById('detailsView').style.display = 'block';
        }

        function updateFileName(input) {
            const fileName = input.files[0]?.name || 'اسحب الملف هنا أو انقر للاختيار';
            document.getElementById('fileName').textContent = fileName;
        }

        function submitApplication(event) {
            event.preventDefault();
            
            const formData = new FormData(event.target);
            const data = Object.fromEntries(formData.entries());
            data.opportunityId = currentOpportunity.id;
            data.opportunityTitle = currentOpportunity.title;
            
            console.log('Application submitted:', data);
            
            // Show success view
            document.getElementById('applicationView').style.display = 'none';
            document.getElementById('successView').style.display = 'flex';
        }

        function shareOpportunity() {
            const text = `فرصة: ${currentOpportunity.title} - ${currentOpportunity.type === 'job' ? 'وظيفة' : 'تطوع'}`;
            const url = window.location.href;
            
            if (navigator.share) {
                navigator.share({ title: currentOpportunity.title, text, url });
            } else {
                navigator.clipboard.writeText(`${text}\n${url}`);
                alert('تم نسخ الرابط!');
            }
        }

        // Close modal on Escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') closeModal();
        });
    </script>
</body>
</html>
